$.fn.extend({l_zoom:function(c){this.css("position","absolute");var a=c||"free";$(this).attr("l_zoom_mode",a);var b=$('<div class="zoom_right"></div><div class="zoom_rb"></div><div class="zoom_bottom"></div>');this.append(b);$(".zoom_right").mousedown(function(h){var g=$(this);var h=event||window.event;h.stopPropagation();var f=parseInt(g.parent().css("width"));var d={x:h.clientX,y:h.clientY};window.onmousemove=function(i){var i=event||window.event;g.parent().css("width",f+i.clientX-d.x)};window.onmouseup=function(i){var i=event||window.event;window.onmousemove=null}});$(".zoom_bottom").mousedown(function(h){var f=$(this);var h=event||window.event;h.stopPropagation();var g=parseInt(f.parent().css("height"));var d={x:h.clientX,y:h.clientY};window.onmousemove=function(i){var i=event||window.event;f.parent().css("height",g+i.clientY-d.y)};window.onmouseup=function(i){var i=event||window.event;window.onmousemove=null}});$(".zoom_rb").mousedown(function(i){var g=$(this);var i=event||window.event;i.stopPropagation();var f=parseInt(g.parent().css("width"));var h=parseInt(g.parent().css("height"));var d={x:i.clientX,y:i.clientY};window.onmousemove=function(l){var l=event||window.event;if(g.parent().attr("l_zoom_mode")==="free"){g.parent().css({"width":f+l.clientX-d.x,"height":h+l.clientY-d.y});if(parseInt(g.parent().css("width"))<=5){g.parent().css("width",5)}if(parseInt(g.parent().css("height"))<=5){g.parent().css("height",5)}}else{var j=(f+l.clientX-d.x)/f,k=(h+l.clientY-d.y)/h;if(j>=k){g.parent().css({"width":j*f,"height":j*h});if(parseInt(g.parent().css("height"))<=5){g.parent().css({"width":(j*f)/(j*h)*5,"height":5})}console.log(j,f,k,h)}else{g.parent().css({"width":k*f,"height":k*h});if(parseInt(g.parent().css("width"))<=5){g.parent().css({"width":5,"height":(k*h)/(k*f)*5})}}}};window.onmouseup=function(j){var j=event||window.event;window.onmousemove=null}});return this}});